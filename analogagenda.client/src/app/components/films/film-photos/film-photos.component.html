<div class="container">
  <div class="header">
    <div class="film-info" *ngIf="film">
      <h1>{{ (film.name?.trim() ? film.name + ' - ' + film.brand : film.brand) }} - {{ film.formattedExposureDate || 'Photos' }}</h1>
      <p class="film-details">{{ film.type }} â€¢ ISO {{ film.iso }}</p>
    </div>
  </div>

  <app-error-message [message]="errorMessage"></app-error-message>

  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading photos...</p>
  </div>

  <div *ngIf="!loading && photos.length === 0" class="no-photos">
    <div class="no-photos-icon">ðŸ“·</div>
    <p>No photos found for this film.</p>
    <div *ngIf="uploadLoading && uploadProgress.total > 0" class="upload-progress">
      Uploading photo {{ uploadProgress.current }} of {{ uploadProgress.total }}
    </div>
    <button class="add-photos-btn" [disabled]="uploadLoading" (click)="onUploadPhotos()" *ngIf="isOwner">
      <span class="button-content" [class.loading]="uploadLoading">
        ðŸ“¸ Add Photos
      </span>
      <svg *ngIf="uploadLoading" class="button-spinner" viewBox="0 0 24 24">
        <circle class="spinner-bg" cx="12" cy="12" r="10" stroke-width="4"></circle>
        <path class="spinner-path" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
      </svg>
    </button>
    <p>Use the browser back button to return.</p>
  </div>

  <app-photos-content
    *ngIf="!loading && photos.length > 0"
    [photos]="photos"
    [film]="film"
    mode="edit"
    [isOwner]="isOwner"
    [uploadLoading]="uploadLoading"
    [uploadProgress]="uploadProgress"
    [downloadAllLoading]="downloadAllLoading"
    (addPhotos)="onUploadPhotos()"
    (download)="onDownloadPhoto($event)"
    (downloadAll)="onDownloadAllPhotos($event)"
    (deletePhoto)="onDeletePhoto($event)"
    (restrictToggle)="onRestrictToggle($event)"
  ></app-photos-content>
</div>
