<div class="container">
    <div class="header">
        <button class="add-session" (click)="onNewSessionClick()">+ New Session +</button>
    </div>

    <div class="sessions-container">
        <div class="sessions-section">
            <h2 class="sessions-title">Development Sessions</h2>
            <app-list
                *ngIf="sessionCardTemplate"
                [items]="sessions"
                [cardTemplate]="sessionCardTemplate"
                [rowTemplate]="sessionRowTemplate"
                [columnHeaders]="sessionTableHeaders"
                [hasMore]="hasMore"
                [loading]="loading"
                (loadMore)="loadMoreSessions()"
                (itemClick)="onSessionSelected($event.id)">
            </app-list>
        </div>
    </div>
</div>

<!-- Template for session cards -->
<ng-template #sessionCardTemplate let-session>
    <div class="card">
        <div class="image"><img *ngIf="session.imageUrl" [src]="session.imageUrl" [alt]="session.location" /></div>
        <span class="title">{{session.location}}</span>
        <span class="info date">{{formatDate(session.sessionDate)}}</span>
        <span class="info participants">{{parseParticipants(session.participants).join(', ')}}</span>
        <span class="info description" *ngIf="session.description">{{session.description}}</span>
    </div>
</ng-template>

<ng-template #sessionRowTemplate let-session>
    <td>{{ session.location }}</td>
    <td>{{ formatDate(session.sessionDate) }}</td>
    <td>{{ parseParticipants(session.participants).join(', ') }}</td>
    <td>{{ session.description || '' }}</td>
    <td class="session-cell-image"><app-image-preview [imageUrl]="session.imageUrl" [alt]="session.location" popoverPosition="left"></app-image-preview></td>
</ng-template>
